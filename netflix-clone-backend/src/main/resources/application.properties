spring.application.name=netflix-clone-backend
server.port=${PORT:8082}

spring.datasource.driver-class-name=${DB_DRIVER:org.h2.Driver}
spring.datasource.url=${DB_URL:jdbc:h2:mem:netflixdb;MODE=MySQL;DB_CLOSE_DELAY=-1;DATABASE_TO_UPPER=false}
spring.datasource.username=${DB_USERNAME:sa}
spring.datasource.password=${DB_PASSWORD:}

spring.jpa.hibernate.ddl-auto=${JPA_DDL_AUTO:update}
spring.jpa.show-sql=${JPA_SHOW_SQL:false}
spring.jpa.open-in-view=false

spring.data.redis.host=${REDIS_HOST:127.0.0.1}
spring.data.redis.port=${REDIS_PORT:6379}
spring.data.redis.username=${REDIS_USERNAME:}
spring.data.redis.password=${REDIS_PASSWORD:}
spring.data.redis.ssl.enabled=${REDIS_SSL_ENABLED:false}
spring.data.redis.timeout=6000ms
cors.allowed-origin-patterns=${CORS_ALLOWED_ORIGIN_PATTERNS:https://*.vercel.app}

server.servlet.session.cookie.same-site=${SESSION_COOKIE_SAMESITE:None}
server.servlet.session.cookie.secure=${SESSION_COOKIE_SECURE:true}
server.servlet.session.cookie.path=/
server.servlet.session.cookie.domain=${SESSION_COOKIE_DOMAIN:}

ratelimiter.base-url=${RATELIMITER_BASE_URL:http://localhost:8080}
ratelimiter.default-rate-limit=10
ratelimiter.default-window-seconds=60

netflix.rate-limit.max-requests=10
netflix.rate-limit.window-seconds=60
netflix.rate-limit.redis-prefix=netflix:rate-limit

netflix.rate-limit.movies.token-bucket.capacity=10
netflix.rate-limit.movies.token-bucket.refill-per-second=1.0
netflix.rate-limit.movies.sliding-window.max-requests=10
netflix.rate-limit.movies.sliding-window.window-seconds=60

netflix.rate-limit.auth.token-bucket.capacity=5
netflix.rate-limit.auth.token-bucket.refill-per-second=0.5
netflix.rate-limit.auth.sliding-window.max-requests=5
netflix.rate-limit.auth.sliding-window.window-seconds=60
netflix.rate-limit.fail-open-on-redis-error=${RATE_LIMIT_FAIL_OPEN:true}
